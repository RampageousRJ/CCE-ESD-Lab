	AREA RESET,DATA,READONLY
	EXPORT __Vectors

__Vectors
	DCD 0x10001000
	DCD Reset_Handler
	ALIGN
	AREA bubble,CODE,READONLY
	ENTRY
	EXPORT Reset_Handler

Reset_Handler
	LDR R0,=SRC
	LDR R1,=DST
	MOV R10,#5
	BL STORE
	MOV R10,#4
	LDR R2,=DST+16
	BL OUTER
	B STOP
	
EXIT
	POP {R14}
	BX LR

STORE
	PUSH {R14}
	LDR R2,[R0],#4
	STR R2,[R1],#4
	SUB R10,R10,#1
	CMP R10,#0
	BEQ EXIT
	B STORE
	
OUTER
	PUSH {R14}
	MOV R11,R10
	SUB R11,R11,#1
	LDR R1,=DST
	MOV R6,R2
	LDR R3,[R2],#-4
	BL INNER
	SUB R10,R10,#1
	CMP R10,#0
	BEQ EXIT
	B OUTER
	
INNER
	PUSH {R14}
	MOV R7,R1
	LDR R5,[R1],#4
	CMP R5,R3
	BHI SWAP
	B DONE
	
SWAP
	LDR R8,[R7]
	LDR R9,[R6]
	STR R9,[R7]
	STR R8,[R6]
	MOV R3,R8
	
DONE 
	SUB R11,R11,#1
	CMP R11,#0
	BEQ EXIT
	B INNER
	
STOP
	B STOP

SRC DCD 3,4,1,5,2

	AREA dseg,DATA,READWRITE
DST DCD 0

	END